<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auction Application Form</title>
    <link rel="stylesheet" href="styles.css">
</head>


<body>
    
        <h3 style="text-align: center;">
          <b>DIRECTORATE OF COMMERCIAL TAXES<br> GOVERNMENT OF WEST BENGAL <br>
          <u>14, BELIAGHATA ROAD, KOLKATA-700015</u></b>
        </h3>
        <p>
            <h4 style="text-align: center;">
              Application for Participation in Auction <br> Date: __/__/2024 
            </h4>
        </p>
        <p style="text-align: center;">
            Please Fill Up the Following Information
        </p>
    
    <form id="auctionForm">
      <div class="container">
        <div>
            <label for="gstin">GSTIN <span class="required">*</span></label>
            <input type="text" id="gstin" name="gstin" required>
            <span class="error-message" id="gstinError"></span>
        </div>
        <div>
        <label for="tradeName">Trade Name</label>
        <input type="text" id="tradeName" name="tradeName" readonly>
        </div>

        <div>
        <label for="legalName">Legal Name</label>
        <input type="text" id="legalName" name="legalName" readonly>
        </div>

        <div>
          <label for="applicantName">Name of the Applicant <span class="required">*</span></label>
          <input type="text" id="applicantName" name="applicantName" required>
        </div>

        <div>
          <label for="mobileNo">Mobile No. of the Applicant <span class="required">*</span></label>
          <input type="tel" id="mobileNo" name="mobileNo" required>
        </div>

        <div>
          <label for ="relationship">Relationship with the Taxpayer <span class="required">*</span> </label>
          <select id="relationship" name="relationship" required>
            <option value="">Select Relationship</option>
            <option value="Proprietor">Proprietor</option>

        </div>

        <button type="submit">Submit</button>
    </form>

<script>
document.getElementById('gstin').addEventListener('input', function() {
  // Clear previous error messages
  document.getElementById('gstinError').textContent = '';

  // Check if the input value matches the pattern of GSTIN (alpha-numeric)
  const gstinValue = this.value.trim();
  const gstinPattern = /^[a-zA-Z0-9]{15}$/;

  if (!gstinPattern.test(gstinValue)) {
    document.getElementById('gstinError').textContent = 'Please enter a valid GSTIN (15 characters alpha-numeric)';
    return;
  }

  // Call a function to validate GSTIN against the GST database
  validateGSTIN(gstinValue);
});

function validateGSTIN(gstin) {
  // You will need to implement this function to make an API call to your backend
  // which will validate the GSTIN against the GST database.
  // Upon successful validation, update Trade Name and Legal Name fields accordingly.
  // For demonstration purposes, let's assume the backend returns data in the following format:
  const response = {
    success: true,
    tradeName: 'Sample Trade Name',
    legalName: 'Sample Legal Name'
  };
  if (response.success) {
    document.getElementById('tradeName').value = response.tradeName;
    document.getElementById('legalName').value = response.legalName;
  } else {
    document.getElementById('gstinError').textContent = 'Invalid GSTIN';
  }
}

// Prevent form submission for demonstration
document.getElementById('auctionForm').addEventListener('submit', function(event) {
  event.preventDefault();
  alert('Form submitted successfully!');
});

</script>
</body>
</html>